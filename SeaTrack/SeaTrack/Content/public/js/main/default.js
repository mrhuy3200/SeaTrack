var map;
var positionView = 0;
var _def_Lat = 13.2000472;
var _def_Lng = 109.1243889;
var _def_zoom = 6;

var _armarker = [];
var _flightPath = [];
var _interval;
var point;
var infowin;
var _infowins = [];
var _listDeviceStatus;




var dataListStatus = [{
	"VehicleGroupID": null,
	"SL": null,
	"VehicleNumber": "51B50055",
	"Addr": "QL1A, Tuy Phước, Bình Định, Vietnam",
	"AddressID": 22442626,
	"DateExpired": "/Date(1609347600000)/",
	"Status": "mất liên lạc 68h22",
	"Key_": 0,
	"Door": 0,
	"color": "red",
	"VehicleGroup": "All group",
	"KeyShow": "Mở",
	"DoorShow": "Đóng",
	"stringStatus": "MatLL",
	"VehicleCategoryID": 1,
	"id": "/22232",
	"leaf": "true",
	"text": "51B50055",
	"checked": false,
	"in_out": null,
	"STT": "1",
	"OldLat": null,
	"OldLng": null,
	"DLat": null,
	"DLng": null,
	"NameDriver": null,
	"PhoneDriver": null,
	"DriverLicense": null,
	"DayCreateLicense": null,
	"DayExpiredLicense": null,
	"Rank": null,
	"RegPlace": null,
	"TypeTransportID": 0,
	"TypeTransportName": "Trống",
	"ProvinceName": "... Trống",
	"Business": "",
	"SpeedLimit": 80,
	"Chassis": "",
	"Cooler": null,
	"Grosston": "",
	"Cooler_": 0,
	"ZoneLat": 15.87681,
	"ZoneLng": 105.82031,
	"Radius": 892218,
	"QCVN": 0,
	"OilValue": 0,
	"FuelCapacity": 0,
	"OldLat_": 13.85262,
	"OldLng_": 109.13466,
	"loginname": null,
	"status_id": 1,
	"DataID": 1058390,
	"DeviceID": 22232,
	"Version": "C1.0",
	"Imei": "0x64190621af9",
	"Latitude": 13.8525,
	"Longitude": 109.1345,
	"Speed": 0,
	"StatusKey": 1,
	"StatusDoor": 0,
	"Sleep": 1,
	"DateSave": "/Date(1580820394000)/",
	"Switch_": 1,
	"Switch_Door": 1,
	"TheDriver": null},{"VehicleGroupID": null,
	"SL": null,
	"VehicleNumber": "51B50129",
	"Addr": "Nhấp vào xem",
	"AddressID": 61819250,
	"DateExpired": "/Date(1609520400000)/",
	"Status": "mất liên lạc 9h58",
	"Key_": 0,
	"Door": 0,
	"color": "red",
	"VehicleGroup": "All group",
	"KeyShow": "Mở",
	"DoorShow": "Đóng",
	"stringStatus": "MatLL",
	"VehicleCategoryID": 1,
	"id": "/22233",
	"leaf": "true",
	"text": "51B50129",
	"checked": false,
	"in_out": null,
	"STT": "2",
	"OldLat": null,
	"OldLng": null,
	"DLat": null,
	"DLng": null,
	"NameDriver": null,
	"PhoneDriver": null,
	"DriverLicense": null,
	"DayCreateLicense": null,
	"DayExpiredLicense": null,
	"Rank": null,
	"RegPlace": null,
	"TypeTransportID": 0,
	"TypeTransportName": "Trống",
	"ProvinceName": "... Trống",
	"Business": "",
	"SpeedLimit": 80,
	"Chassis": "",
	"Cooler": null,
	"Grosston": "",
	"Cooler_": 0,
	"ZoneLat": 15.87681,
	"ZoneLng": 105.82031,
	"Radius": 892218,
	"QCVN": 0,
	"OilValue": 0,
	"FuelCapacity": 0,
	"OldLat_": 10.88299,
	"OldLng_": 106.61772,
	"loginname": null,
	"status_id": 1,
	"DataID": 1142430,
	"DeviceID": 22233,
	"Version": "C1.0",
	"Imei": "0x900eb3134e2d",
	"Latitude": 10.8827,
	"Longitude": 106.618,
	"Speed": 0,
	"StatusKey": 1,
	"StatusDoor": 0,
	"Sleep": 1,
	"DateSave": "/Date(1581030594000)/",
	"Switch_": 1,
	"Switch_Door": 1,
	"TheDriver": null},{"VehicleGroupID": null,
	"SL": null,
	"VehicleNumber": "50B50028",
	"Addr": "247 Thới Tam Thôn 5, Thới Tam Thôn, Hóc Môn, HCM",
	"AddressID": 7884295,
	"DateExpired": "/Date(1609520400000)/",
	"Status": "mất liên lạc 5h25",
	"Key_": 0,
	"Door": 0,
	"color": "red",
	"VehicleGroup": "All group",
	"KeyShow": "Mở",
	"DoorShow": "Đóng",
	"stringStatus": "MatLL",
	"VehicleCategoryID": 1,
	"id": "/22234",
	"leaf": "true",
	"text": "50B50028",
	"checked": false,
	"in_out": null,
	"STT": "3",
	"OldLat": null,
	"OldLng": null,
	"DLat": null,
	"DLng": null,
	"NameDriver": null,
	"PhoneDriver": null,
	"DriverLicense": null,
	"DayCreateLicense": null,
	"DayExpiredLicense": null,
	"Rank": null,
	"RegPlace": null,
	"TypeTransportID": 0,
	"TypeTransportName": "Trống",
	"ProvinceName": "... Trống",
	"Business": "",
	"SpeedLimit": 80,
	"Chassis": "",
	"Cooler": null,
	"Grosston": "",
	"Cooler_": 0,
	"ZoneLat": 15.87681,
	"ZoneLng": 105.82031,
	"Radius": 892218,
	"QCVN": 0,
	"OilValue": 0,
	"FuelCapacity": 0,
	"OldLat_": 10.88295,
	"OldLng_": 106.61791,
	"loginname": null,
	"status_id": 1,
	"DataID": 1147545,
	"DeviceID": 22234,
	"Version": "C1.0",
	"Imei": "0x900eb30b5e51",
	"Latitude": 10.883,
	"Longitude": 106.618,
	"Speed": 0,
	"StatusKey": 1,
	"StatusDoor": 0,
	"Sleep": 1,
	"DateSave": "/Date(1581046984000)/",
	"Switch_": 1,
	"Switch_Door": 1,
	"TheDriver": null},{"VehicleGroupID": null,
	"SL": null,
	"VehicleNumber": "51B50082",
	"Addr": "147/5A Tổ 104 ấp Tam Đông, Thới Tam Thôn, Hóc Môn, Hồ Chí Minh, Việt Nam",
	"AddressID": 32588806,
	"DateExpired": "/Date(1609693200000)/",
	"Status": "mất liên lạc 5h21",
	"Key_": 0,
	"Door": 0,
	"color": "red",
	"VehicleGroup": "All group",
	"KeyShow": "Mở",
	"DoorShow": "Đóng",
	"stringStatus": "MatLL",
	"VehicleCategoryID": 1,
	"id": "/22235",
	"leaf": "true",
	"text": "51B50082",
	"checked": false,
	"in_out": null,
	"STT": "4",
	"OldLat": null,
	"OldLng": null,
	"DLat": null,
	"DLng": null,
	"NameDriver": null,
	"PhoneDriver": null,
	"DriverLicense": null,
	"DayCreateLicense": null,
	"DayExpiredLicense": null,
	"Rank": null,
	"RegPlace": null,
	"TypeTransportID": 0,
	"TypeTransportName": "Trống",
	"ProvinceName": "... Trống",
	"Business": "",
	"SpeedLimit": 80,
	"Chassis": "",
	"Cooler": null,
	"Grosston": "",
	"Cooler_": 0,
	"ZoneLat": 15.87681,
	"ZoneLng": 105.82031,
	"Radius": 892218,
	"QCVN": 0,
	"OilValue": 0,
	"FuelCapacity": 0,
	"OldLat_": 10.88266,
	"OldLng_": 106.61788,
	"loginname": null,
	"status_id": 1,
	"DataID": 1131154,
	"DeviceID": 22235,
	"Version": "C1.0",
	"Imei": "0x900eb3134e39",
	"Latitude": 10.8829,
	"Longitude": 106.618,
	"Speed": 0,
	"StatusKey": 1,
	"StatusDoor": 0,
	"Sleep": 1,
	"DateSave": "/Date(1581047264000)/",
	"Switch_": 1,
	"Switch_Door": 1,
	"TheDriver": null},{"VehicleGroupID": null,
	"SL": null,
	"VehicleNumber": "51B50063",
	"Addr": "QL 1, tt. Phú Bài, Hương Thủy, ",
	"AddressID": 3908349,
	"DateExpired": "/Date(1610557200000)/",
	"Status": "51km/h",
	"Key_": 0,
	"Door": 0,
	"color": "green",
	"VehicleGroup": "All group",
	"KeyShow": "Mở",
	"DoorShow": "Đóng",
	"stringStatus": null,
	"VehicleCategoryID": 1,
	"id": "/22236",
	"leaf": "true",
	"text": "51B50063",
	"checked": false,
	"in_out": null,
	"STT": "5",
	"OldLat": null,
	"OldLng": null,
	"DLat": null,
	"DLng": null,
	"NameDriver": null,
	"PhoneDriver": null,
	"DriverLicense": null,
	"DayCreateLicense": null,
	"DayExpiredLicense": null,
	"Rank": null,
	"RegPlace": null,
	"TypeTransportID": 0,
	"TypeTransportName": "Trống",
	"ProvinceName": "... Trống",
	"Business": "",
	"SpeedLimit": 80,
	"Chassis": "",
	"Cooler": null,
	"Grosston": "",
	"Cooler_": 0,
	"ZoneLat": 15.87681,
	"ZoneLng": 105.82031,
	"Radius": 892218,
	"QCVN": 0,
	"OilValue": 0,
	"FuelCapacity": 0,
	"OldLat_": 16.38015,
	"OldLng_": 107.69656,
	"loginname": null,
	"status_id": 14,
	"DataID": 1153376,
	"DeviceID": 22236,
	"Version": "C1.0",
	"Imei": "0x900eb3134e0d",
	"Latitude": 16.38031,
	"Longitude": 107.69587,
	"Speed": 51,
	"StatusKey": 1,
	"StatusDoor": 0,
	"Sleep": 0,
	"DateSave": "/Date(1581066574000)/",
	"Switch_": 1,
	"Switch_Door": 1,
	"TheDriver": null},{"VehicleGroupID": null,
	"SL": null,
	"VehicleNumber": "51B50040",
	"Addr": "247 Thới Tam Thôn 5, Thới Tam Thôn, Hóc Môn, HCM",
	"AddressID": 7884400,
	"DateExpired": "/Date(1610557200000)/",
	"Status": "mất liên lạc 24h15",
	"Key_": 0,
	"Door": 0,
	"color": "red",
	"VehicleGroup": "All group",
	"KeyShow": "Mở",
	"DoorShow": "Đóng",
	"stringStatus": "MatLL",
	"VehicleCategoryID": 1,
	"id": "/22237",
	"leaf": "true",
	"text": "51B50040",
	"checked": false,
	"in_out": null,
	"STT": "6",
	"OldLat": null,
	"OldLng": null,
	"DLat": null,
	"DLng": null,
	"NameDriver": null,
	"PhoneDriver": null,
	"DriverLicense": null,
	"DayCreateLicense": null,
	"DayExpiredLicense": null,
	"Rank": null,
	"RegPlace": null,
	"TypeTransportID": 0,
	"TypeTransportName": "Trống",
	"ProvinceName": "... Trống",
	"Business": "",
	"SpeedLimit": 80,
	"Chassis": "",
	"Cooler": null,
	"Grosston": "",
	"Cooler_": 0,
	"ZoneLat": 15.87681,
	"ZoneLng": 105.82031,
	"Radius": 892218,
	"QCVN": 0,
	"OilValue": 0,
	"FuelCapacity": 0,
	"OldLat_": 10.8472,
	"OldLng_": 106.71991,
	"loginname": null,
	"status_id": 1,
	"DataID": 1120800,
	"DeviceID": 22237,
	"Version": "C1.0",
	"Imei": "0x900eb30f8245",
	"Latitude": 10.883,
	"Longitude": 106.6177,
	"Speed": 0,
	"StatusKey": 1,
	"StatusDoor": 0,
	"Sleep": 1,
	"DateSave": "/Date(1580979219000)/",
	"Switch_": 1,
	"Switch_Door": 1,
	"TheDriver": null},{"VehicleGroupID": null,
	"SL": null,
	"VehicleNumber": "51B50104",
	"Addr": "QL 1, Tuy An, Phú Yên",
	"AddressID": 4114727,
	"DateExpired": "/Date(1610557200000)/",
	"Status": "61km/h",
	"Key_": 0,
	"Door": 0,
	"color": "green",
	"VehicleGroup": "All group",
	"KeyShow": "Mở",
	"DoorShow": "Đóng",
	"stringStatus": null,
	"VehicleCategoryID": 1,
	"id": "/22238",
	"leaf": "true",
	"text": "51B50104",
	"checked": false,
	"in_out": null,
	"STT": "7",
	"OldLat": null,
	"OldLng": null,
	"DLat": null,
	"DLng": null,
	"NameDriver": null,
	"PhoneDriver": null,
	"DriverLicense": null,
	"DayCreateLicense": null,
	"DayExpiredLicense": null,
	"Rank": null,
	"RegPlace": null,
	"TypeTransportID": 0,
	"TypeTransportName": "Trống",
	"ProvinceName": "... Trống",
	"Business": "",
	"SpeedLimit": 80,
	"Chassis": "",
	"Cooler": null,
	"Grosston": "",
	"Cooler_": 0,
	"ZoneLat": 15.87681,
	"ZoneLng": 105.82031,
	"Radius": 892218,
	"QCVN": 0,
	"OilValue": 0,
	"FuelCapacity": 0,
	"OldLat_": 13.21408,
	"OldLng_": 109.26718,
	"loginname": null,
	"status_id": 14,
	"DataID": 1153377,
	"DeviceID": 22238,
	"Version": "C1.0",
	"Imei": "0x900eb311cb11",
	"Latitude": 13.21493,
	"Longitude": 109.26691,
	"Speed": 61,
	"StatusKey": 1,
	"StatusDoor": 0,
	"Sleep": 0,
	"DateSave": "/Date(1581066574000)/",
	"Switch_": 1,
	"Switch_Door": 1,
	"TheDriver": null},{"VehicleGroupID": null,
	"SL": null,
	"VehicleNumber": "51B50025",
	"Addr": "TL 687B, Ea H'Leo, Đắk Lắk",
	"AddressID": 13072250,
	"DateExpired": "/Date(1610557200000)/",
	"Status": "mất liên lạc 10h55",
	"Key_": 0,
	"Door": 0,
	"color": "red",
	"VehicleGroup": "All group",
	"KeyShow": "Mở",
	"DoorShow": "Đóng",
	"stringStatus": "MatLL",
	"VehicleCategoryID": 1,
	"id": "/22239",
	"leaf": "true",
	"text": "51B50025",
	"checked": false,
	"in_out": null,
	"STT": "8",
	"OldLat": null,
	"OldLng": null,
	"DLat": null,
	"DLng": null,
	"NameDriver": null,
	"PhoneDriver": null,
	"DriverLicense": null,
	"DayCreateLicense": null,
	"DayExpiredLicense": null,
	"Rank": null,
	"RegPlace": null,
	"TypeTransportID": 0,
	"TypeTransportName": "Trống",
	"ProvinceName": "... Trống",
	"Business": "",
	"SpeedLimit": 80,
	"Chassis": "",
	"Cooler": null,
	"Grosston": "",
	"Cooler_": 0,
	"ZoneLat": 15.87681,
	"ZoneLng": 105.82031,
	"Radius": 892218,
	"QCVN": 0,
	"OilValue": 0,
	"FuelCapacity": 0,
	"OldLat_": 13.20938,
	"OldLng_": 108.32377,
	"loginname": null,
	"status_id": 1,
	"DataID": 1140064,
	"DeviceID": 22239,
	"Version": "C1.0",
	"Imei": "0x900eb311f0e2",
	"Latitude": 13.2095,
	"Longitude": 108.3241,
	"Speed": 0,
	"StatusKey": 1,
	"StatusDoor": 0,
	"Sleep": 1,
	"DateSave": "/Date(1581027209000)/",
	"Switch_": 1,
	"Switch_Door": 1,
	"TheDriver": null
	}];

var w = 0, t, obj, inner, page;
var activeAutoLoad = 0;
var ArrMarkerSelect = [];
var lotrinhpoint = [], _ArrMarkerDes = [], infowindows = [], arrayMarker = [], infowindowcop = [];
var Gmarker_lotrinh_end;
var _stt_rows = 0, pagination_num = 0;
var flag_interval = false;
var _danhgia = 0;
var load_exp_dv = 0;
var Arr_username = [];
var _dstaikhoan_loginname = "";
var _arr_dstaikhoan_select = [], _arr_loginname = [], _arr_info_row_select = [];
var _first_click = true;
var _arr_dsxe_byuserid = [];
var _dsxe_ofuser_change = "", _dsxe_ofuser_change_delete = "";
var _arr_tonghop_select = [], _arr_tonghop_unselect = [];
var list_infoDevice = [];
var _dstaikhoan_length = 0;
var list_thietbi_loaixe, list_thietbi_tinh, list_thietbi_loaivantai, list_thietbi_nhomxe;
var _arr_info_allrow_saved = [];
var valueItem_current = 0;
var _arr_list_deviceid = [];
var _arr_dsxe_select = [];
var _arr_dsxe_unselect = [];
var _arr_dstaixe_select = [];
var _arr_dsthietbi_select = [];
var line, line1, _distance, listdata, listData_PauseStop;
var status_btn = 1, speed_btn = 0, speed = 60, count = 0, count_max = 0, intervalForAnimation;
var _CategoryID;
var imageURL_ = '';
var armarker = [];


var armarkerTemp = [];
var imgArr = [];
var flag_ = 0;
var old_lat = -1;
var old_long = -1;
var _moveMarker;
var distance;
var _marker_dir;

var directionDisplay;
var directionsService;
var stepDisplay;
var position;
var marker = [];
var flightPath = [];
var polyline = [];
var poly2 = [];
var poly = null;
var startLocation = [];
var endLocation = [];
var timerHandle = [];
var speed = 0.000005, wait = 1;
var infowindow = null;
var myPano;
var panoClient;
var nextPanoId;
var Colors = ["#FF0000", "#00FF00", "#0000FF"];
var rendererOptions;
var lastVertex = 1;
var stepnum = 0;
var step = 50;
var tick = 100;
var eol = [];
var requestArray = [], renderArray = [];
//var cur = 0;
var directionsDisplay = [];
// status
// 1: Đang hoạt động
// 2: Đang neo
// 3: Mất liên lạc
// 4: Hết hạn
var _stt_cmd = {
	1:{"img": "bus-green.png",},
	2:{"img": "bus-black.png",},
	3:{"img": "bus-red.png",},
	4:{"img": "bus-black.png",}
};
var s_data = [
{
	"id": "1",
	"imei": 235486451231,
	"text": "51B50055",
	"status": "Mất liên lạc",
	"sttcode": 3,
	"timer": "84:12:52",
	"timeout": "3 ngày 12 giờ",
	"_lat": 13.053125,
	"_lng": 113.071556,
	"listStop": [
	{lat: 7.261741,lng: 105.130624},
	{lat: 7.052163,lng: 105.917911},
	{lat: 7.452181,lng: 108.241366},
	{lat: 7.490259,lng: 110.468810},
	{lat: 7.946933,lng: 111.275299},
	{lat: 8.744874,lng: 112.350617},
	{lat: 9.654709,lng: 113.176308},
	{lat: 10.731937,lng: 113.099499},
	{lat: 12.003125,lng: 113.071556},
	{lat: 13.053125,lng: 113.071556},
	],
},{
	"id": "2",
	"imei": 235486451231,
	"text": "51B50129",
	"status": "Đang di chuyển",
	"sttcode": 1,
	"timer": "49:18:50",
	"timeout": "2 ngày 1 giờ",
	"_lat": 10.399839,
	"_lng": 106.816233,
	"listStop": [
	{lat: 7.665891,lng: 116.484201},
	{lat: 7.077536,lng: 114.352854},
	{lat: 7.752988,lng: 110.200022},
	{lat: 7.490259,lng: 110.468810},
	{lat: 7.187326,lng: 109.057444},
	{lat: 9.880735,lng: 107.848948},
	{lat: 10.399839,lng: 106.816233},

	],
},{
	"id": "3",
	"imei": 235486451231,
	"text": "50B50028",
	"status": "Đang neo",
	"sttcode": 2,
	"timer": "1:12:20",
	"timeout": "1 giờ",
	"_lat": 12.274071,
	"_lng": 109.299143,
	"listStop": [
	{lat: 20.363761,lng: 106.750315},
	{lat: 19.330402,lng: 107.365549},
	{lat: 18.248734,lng: 107.629221},
	{lat: 16.971245,lng: 108.881663},
	{lat: 15.727308,lng: 109.233225},
	{lat: 13.473585,lng: 110.112131},
	{lat: 12.660251,lng: 109.914377},
	{lat: 12.274071,lng: 109.299143},
	],
},{
	"id": "4",
	"imei": 235486451231,
	"text": "51B50082",
	"status": "Đang di chuyển",
	"sttcode": 1,
	"timer": "36:02:12",
	"timeout": "1 ngày 12 giờ",
	"_lat": 4.520107,
	"_lng": 108.947581,
	"listStop": [
	{lat: 10.378227,lng: 106.926096},
	{lat: 9.209016,lng: 106.618479},
	{lat: 7.317330,lng: 105.541819},
	{lat: 5.723755,lng: 106.003245},
	{lat: 4.322942,lng: 106.706370},
	{lat: 4.454391,lng: 108.166428},
	{lat: 4.520107,lng: 108.947581},
	],
},
];
var _c_marker = 0;



